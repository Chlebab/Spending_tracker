{% block stylelink %}
<link
    rel="stylesheet"
    href="{{ url_for('static', filename='style.css') }}"/>
{% endblock %} 
<h1>Transactions</h1>

<p>
    <a href="/">Home</a>
</p>
<p>
    <a href="/transactions/new">New Transaction</a>
</p>
<table>
    <thead>
        <tr>
            <th>No.</th>
            <th><a href="{{ url_for('transactions.sort_transactions', column='merchant') }}">Merchant</a></th>
            <th><a href="{{ url_for('transactions.sort_transactions', column='category') }}">Category</a></th>
            <th><a href="{{ url_for('transactions.sort_transactions', column='amount') }}">Amount</a></th>
            <th><a href="{{ url_for('transactions.sort_transactions', column='date') }}">Date</a></th>
            <th><a href="{{ url_for('transactions.sort_transactions', column='comment') }}">Comment</a></th>
            <th>Delete</th>
            <th>Edit</th>
        </tr>
    </thead>
    <tbody>
        {% for transaction in transactions %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ transaction.merchant.name }}</td>
            <td>{{ transaction.tag.category }}</td>
            <td>{{ transaction.amount }}</td>
            <td>{{ transaction.date }}</td>
            <td>{{ transaction.comment }}</td>
            <td>
                <form action="/transactions/delete" method="POST">
                    <input type="hidden" name="transaction_id" value="{{ transaction.id }}">
                    <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
                </form>
            </td>
            <td>
                <form method="get" action="/transactions/edit/{{ transaction.id }}">
                    <button type="submit" class="edit-button">Edit</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<p>Total spendings: {{ transactions_sum }}</p>